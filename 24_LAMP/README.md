# how-to :: CREATE A DIGITAL OCEAN DROPLET WITH UBUNTU AND APACHE
---
## Overview
Guide to creating an ubuntu 20.04 virtual machine ("droplet") and installing Apache2 web server on it.

### Estimated Time Cost: .5 hours

### Prerequisites:
- Github Student Developer Pack (using an educational email)
- Digital Ocean Account

### Provisioning A Droplet:
- Go to the Droplets page on Digital Ocean. Create under manage
- Follow Ubuntu > Basic Plan shared CPU > $5/mo > New York datacenter region > SSH key authentication > no backups
	- For SSH key authentication, use the public key generated by ```$ ssh-keygen``` 

### Intial Setup 
- Log in as root 
    ```
    $ ssh root@your_server_ip
    ``` 
- Create a new user 
    ```
    $ adduser User
    ```
- Granding Admin to new User
    ```
    $usermod -aG sudo User
    ```
- Run each of the following commands for seting up a basic firewall. 
    ```
    $ ufw app list
    ```
    ```
    $ ufw allow OpenSSH
    ```
    ```
    $ ufw enable
    ```
    Make sure status shows active ``` $ ufw status  ```
- Enabling External Access for Your Regular User with SSH Auth
    ```
    $ rsync --archive --chown=sammy:sammy ~/.ssh /home/sammy
    ```
    ```
    $ ssh sammy@your_server_ip
    ```
    ```
    $ sudo command_to_run
    ```

### Installing Linux, Apache, Sqlite, Python (LAMP):
- Run each of the following commands. 
    ```
    $ sudo apt update
    ```
	```
	$ sudo apt install apache2
	```
	```
	$ sudo apt install sqlite 3
	```
	```
	$ sudo apt install python3
	```
- Adjusting the Firewall
    ```
    $ sudo ufw app list
    ```
    ```
    $ sudo ufw allow 'Apache'
    ```
    ```
    $ sudo ufw status
    ```
- Checking Web Server
    ```
    $ sudo systemctl status apache2
    ```


### Extra:

- To remove root access but still have user account, run
```$ adduser username``` and enter a password. Ignore other prompts if wanted. 
- Run ```$ usermod -aG sudo username``` to give admin powers 
- Run ```$ su - username``` to switch users

- Disabling root login
Run ```$ sudo nano /etc/ssh/sshd_config```
set "PermitRootLogin" to "no"
Run ```$ sudo service ssh restart```

- Managing Apache


### Resources
* [Installing LAMP Tutorial](https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-ubuntu-18-04)
* [Installing Apache](https://www.digitalocean.com/community/tutorials/how-to-install-the-apache-web-server-on-ubuntu-20-04)
* [Sever Setup](https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-20-04)


---

Accurate as of (last update): 2021-01-23

#### Contributors:  
Aryaman Goenka, PD1


